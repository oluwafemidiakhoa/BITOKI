# Production configuration for BITOKI platform

# Application settings
app:
  name: "BITOKI"
  environment: "production"
  debug: false
  secret_key: "generate-strong-secret-key-in-production"
  
  # Security settings
  security:
    session_timeout_minutes: 30
    password_min_length: 12
    password_require_uppercase: true
    password_require_lowercase: true
    password_require_digits: true
    password_require_special: true
    
    # Rate limiting
    rate_limits:
      global_request_limit: 1000  # requests per minute
      api_request_limit: 200      # API requests per minute
      login_attempts: 5          # max login attempts
      login_window_minutes: 15   # login attempt window
      
    # CORS settings
    cors:
      allowed_origins: 
        - "https://bitoki.com"
        - "https://www.bitoki.com"
        - "https://app.bitoki.com"
      allowed_methods: 
        - "GET"
        - "POST"
        - "PUT"
        - "DELETE"
        - "OPTIONS"
      allowed_headers:
        - "Content-Type"
        - "Authorization"
        - "X-Requested-With"

# Database settings
database:
  # PostgreSQL production configuration
  url: "postgresql://bitoki_user:secure_password@localhost:5432/bitoki_prod"
  pool_size: 20
  max_overflow: 30
  pool_timeout: 30
  pool_recycle: 3600
  
  # Backup settings
  backups:
    enabled: true
    frequency: "daily"
    retention_days: 30
    encryption: true

# Security settings
security:
  encryption:
    key_rotation_days: 90
    backup_encryption: true
    
  two_factor:
    required_for_logins: true
    required_for_transfers: true
    transfer_threshold: 1000.0  # Require 2FA for transfers over $1000
    
  session:
    secure_cookies: true
    http_only_cookies: true
    same_site_policy: "Lax"
    
  headers:
    hsts: true
    hsts_max_age: 31536000  # 1 year
    content_security_policy: "default-src 'self'; script-src 'self' 'unsafe-inline' cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' cdn.jsdelivr.net fonts.googleapis.com; img-src 'self' data: chart.googleapis.com; font-src 'self' fonts.gstatic.com; connect-src 'self' api.bitoki.com; frame-src 'none'; object-src 'none'"
    x_frame_options: "DENY"
    x_content_type_options: "nosniff"
    x_xss_protection: "1; mode=block"

# API settings
api:
  rate_limits:
    anonymous: 60  # requests per minute
    authenticated: 300
    premium: 1000
    
  caching:
    enabled: true
    cache_ttl_seconds: 60  # 1 minute for market data
    
  # API keys for external services
  external_services:
    coinmarketcap_api_key: "your-api-key"
    coingecko_api_key: "your-api-key"
    blockchain_info_api_key: "your-api-key"

# Monitoring and Logging
monitoring:
  logging:
    level: "INFO"
    file: "logs/bitoki_production.log"
    max_size_mb: 100
    backup_count: 5
    
  metrics:
    prometheus_enabled: true
    prometheus_port: 9090
    
  health_checks:
    enabled: true
    endpoints:
      - "/health"
      - "/status"
    
  error_reporting:
    sentry_dsn: "your-sentry-dsn"
    enabled: true
    environment: "production"

# Performance settings
performance:
  worker_count: 4  # For gunicorn
  worker_class: "gevent"
  timeout: 120
  keepalive: 60
  
  caching:
    redis_url: "redis://localhost:6379/0"
    cache_ttl: 300  # 5 minutes

# Compliance settings
compliance:
  kyc:
    required_for_withdrawals: true
    threshold: 5000.0  # $5000 threshold
    
  aml:
    monitoring_enabled: true
    suspicious_activity_threshold: 10000.0
    
  data_retention:
    transaction_history_days: 3650  # 10 years
    user_data_days: 3650
    logs_days: 365

# Feature flags
features:
  trading_enabled: true
  gift_cards_enabled: true
  savings_enabled: true
  referral_program_enabled: true
  biometric_login_enabled: true
  
  # Experimental features
  experimental:
    ai_trading_assistant: false
    social_trading: false
    margin_trading: false

# Maintenance settings
maintenance:
  scheduled_downtime:
    enabled: false
    start_time: "03:00"
    end_time: "04:00"
    timezone: "UTC"
  
  backup_schedule:
    database: "0 2 * * *"  # Daily at 2 AM
    files: "0 3 * * *"    # Daily at 3 AM

# Legal and Compliance
legal:
  terms_version: "2.1.0"
  privacy_version: "1.5.0"
  cookie_policy_version: "1.2.0"
  
  supported_countries:
    - "US"
    - "CA"
    - "GB"
    - "NG"
    - "ZA"
    - "KE"
    - "GH"
  
  restricted_countries:
    - "CU"
    - "IR"
    - "KP"
    - "SD"
    - "SY"

# Payment Processing
payments:
  providers:
    - name: "stripe"
      enabled: true
      api_key: "sk_live_your_stripe_key"
      
    - name: "paystack"
      enabled: true
      api_key: "sk_test_14c756cd3cf737fae44a90b87c5e66ea73f31641"
      
    - name: "flutterwave"
      enabled: true
      api_key: "FLWSECK_TEST_your_key"
  
  processing:
    auto_settlement: true
    settlement_currency: "USD"
    settlement_frequency: "daily"

# Deployment settings
deployment:
  docker:
    enabled: true
    image: "bitoki/production"
    tag: "latest"
    
  kubernetes:
    enabled: false
    replicas: 3
    
  scaling:
    min_workers: 2
    max_workers: 10
    scale_up_cpu_threshold: 80
    scale_down_cpu_threshold: 30